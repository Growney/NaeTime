@page "/"
@using NaeTime.Client.MAUI.Lib
@using NaeTime.Messages.Events.System

@layout NaeTime.Client.Razor.Layouts.BlankLayout

@code
{
    [Inject]
    public NavigationManager NavigationManager { get; set; } = null!;
    [Inject]
    public ServiceRunner Runner { get; set; } = null!;
    [Inject]
    public PubSub.Abstractions.IDispatcher Dispatcher { get; set; } = null!;


    protected override async Task OnInitializedAsync()
    {
        await Runner.Start();

        await Dispatcher.Dispatch(new SystemStarted());

        await Task.Delay(1000);

        NavigationManager.NavigateTo("/configure");
    }
}